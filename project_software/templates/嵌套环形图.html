<!DOCTYPE html>
<html lang="en">

<head>
	<!-- META DATA -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<!-- TITLE OF SITE -->
	<title>DashLoon</title>
	<!-- favicon -->
	<!--<link rel="shortcat icon" href="/favicon.ico" type="image/x-icon">-->

	<!--font-awesome.min.css-->
	<link rel="stylesheet" href="../static/font-awesome/css/font-awesome.min.css">

	<!--linear icon css-->
	<link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">

	<!--chartist.min.css-->
	<link rel="stylesheet" href="../static/assets/chartist/css/chartist.min.css">

	<!--bootstrap.min.css-->
	<link rel="stylesheet" href="../static/assets/css/bootstrap.min.css">

	<!--style.css-->
	<link rel="stylesheet" href="../static/assets/css/style.css">

	<!--responsive.css-->
	<link rel="stylesheet" href="../static/assets/css/responsive.css">

	<link rel="stylesheet" href="../static/lib/css/bootstrap.min.css" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]-->
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <script src="../static/plugin/echarts-4.4.0/dist/echarts.min.js"></script>
	<script src="../static/bootstrap-select-1.13.0-dev/js/bootstrap-select.js" type="text/javascript"></script>
</head>

<body>
    <div hidden id="bubbles"></div>
    	<!-- wrapper -->
	<div id="wrapper">

		<!-- navbar -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="brand">
				<a href="index.html">
					Dash<span>Loon</span>
				</a>
			</div><!--/.brand -->
			<div class="container-fluid">
				<span class="navbar-left">
					.
					<h1>-政府大数据实时治理系统</h1>
				</span><!--/form -->
				<div class="navbar-menu">
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
								<i data-feather="bell"></i>
								<span class="badge badge-bg-1">3</span>
							</a>
							<ul class="dropdown-menu notifications">
								<li><a href="#" class="notification-item"><span class="dot bg-warning"></span>System space is almost full</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-danger"></span>You have 9 unfinished tasks</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-success"></span>Monthly report is available</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-warning"></span>Weekly meeting in 1 hour</a></li>
								<li><a href="#" class="notification-item"><span class="dot bg-success"></span>Your request has been approved</a></li>
								<li><a href="#" class="more">See all notifications</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">
								<img src="../static/assets/images/parson.png" class="img-circle" alt="parson-img">
								<i class="icon-submenu fa fa-angle-down"></i>
							</a>
							<ul class="dropdown-menu">
								<li><a href="#"><i class="lnr lnr-user"></i> <span>My Profile</span></a></li>
								<li><a href="http://127.0.0.1:5000/"><i class="lnr lnr-exit"></i> <span>Logout</span></a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div><!--/.container-fluid -->

		</nav><!--/nav -->
		<!-- END NAVBAR -->

		<!-- LEFT SIDEBAR -->
		<div id="sidebar-nav" class="sidebar">
			<div class="sidebar-scroll">
				<nav>
					<ul class="nav">

						<li>
							<a href="http://127.0.0.1:5000/display" >
								<i data-feather="home"></i> <span>主页</span>
							</a>
						</li>

						<li>
							<a href="http://127.0.0.1:5000/chart1">
								<i data-feather="pie-chart"></i> <span>问题性质</span>
							</a>
						</li>

						<li class="active">
							<a href="http://127.0.0.1:5000/chart4">
								<i data-feather="wifi"></i> <span>结办情况</span>
							</a>
						</li>

						<li>
							<a href="http://127.0.0.1:5000/chart2">
								<i data-feather="bar-chart"></i> <span>街道事件</span>
							</a>
						</li>

						<li>
							<a href="http://127.0.0.1:5000/chart3">
								<i data-feather="map-pin"></i> <span>热点社区</span>
							</a>
						</li>

						<li>
							<a href="http://127.0.0.1:5000/manage">
								<i data-feather="user-check"></i> <span>账号管理</span>
							</a>
						</li>

						<li>
							<a href="http://127.0.0.1:5000/abnormal">
								<i data-feather="bell"></i> <span>异常事件报警</span>
							</a>
						</li>
					</ul>
				</nav>
			</div>

		</div>
		<!-- END LEFT SIDEBAR -->

		<!-- MAIN -->
		<div class="main">

			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">

					<div class="main-content-head">
						<h2>hello {{current.name}}!</h2>
						<p>Welcome to your Dashboard</p>
					</div>

                    <div class="profile-content">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="box">
                                    <div class="box-head">
                                        <h2>结办情况</h2>
                                    </div><!--/.box-head-->
                                    <div class="item">
                                        <div class="item-responsive ">
                                            <p hidden id="demo">测试</p>
                                            <p hidden id="data">{{ data }}</p>
                                            <div class="chart" align="center">
                                                <div id="pie_echarts" style="width: 700px;height:500px;margin-top:50px;"></div>
                                            </div>

                                            <div class="time" align="center">
                                                <form method="post">
                                                    <select class="form-control" name="time-year" id="time-year" style="width:100px;display:inline-block;">
                                                        <option selected="selected">2018</option>
                                                    </select>
                                                    <div style="display:inline-block;margin-right: 10px;">年</div>
                                                    <select class="form-control" name="time-month" id="time-month" style="width:100px;display:inline-block;">
                                                        <option>01</option>
                                                        <option>02</option>
                                                        <option>03</option>
                                                        <option>04</option>
                                                        <option>05</option>
                                                        <option>06</option>
                                                        <option>07</option>
                                                        <option>08</option>
                                                        <option>09</option>
                                                        <option selected="selected">10</option>
                                                        <option>11</option>
                                                        <option>12</option>
                                                    </select>
                                                    <div style="display:inline-block;margin-right: 10px;">月</div>
                                                    <select class="form-control" name="time-day" id="time-day" style="width:100px;display:inline-block;">
                                                        <option>01</option>
                                                        <option>02</option>
                                                        <option>03</option>
                                                        <option>04</option>
                                                        <option>05</option>
                                                        <option>06</option>
                                                        <option>07</option>
                                                        <option>08</option>
                                                        <option>09</option>
                                                        <option>10</option>
                                                        <option>11</option>
                                                        <option>12</option>
                                                        <option>13</option>
                                                        <option>14</option>
                                                        <option>15</option>
                                                        <option>16</option>
                                                        <option>17</option>
                                                        <option>18</option>
                                                        <option>19</option>
                                                        <option>20</option>
                                                        <option>21</option>
                                                        <option>22</option>
                                                        <option>23</option>
                                                        <option>24</option>
                                                        <option>25</option>
                                                        <option>26</option>
                                                        <option>27</option>
                                                        <option>28</option>
                                                        <option selected="selected">29</option>
                                                        <option>30</option>
                                                        <option>31</option>
                                                    </select>

                                                    <div style="display:inline-block;margin-right: 10px;">日</div>
                                                    <br>
                                                    <div align="center">
                                                        <button class='button'>查询</button>
                                                    </div>
                                                </form>
                                            </div>
                                            <script>
                                                var div = document.getElementById('data');
                                                // document.write("nihao")

                                                obj = JSON.parse(div.innerHTML);
                                                //document.getElementById("demo").innerHTML = obj;

                                                var elments = new Array();
                                                var n = 0;
                                                var sum1=0;
                                                // documents.write(obj)
                                                for (var i in obj[0][1]) {
                                                    var k = {};
                                                    //document.write(i)
                                                    k.value = obj[0][1][i];
                                                    sum1+=k.value;
                                                    k.name = i;
                                                    elments[n]=k;
                                                   // document.write(k);
                                                    n++;

                                                }
                                                 var elments2 = new Array();
                                                var n = 0;
                                                var sum2=0;
                                                // documents.write(obj)
                                                for (var i in obj[1][1]) {
                                                    var k = {};
                                                    //document.write(i)
                                                    k.value = obj[1][1][i];
                                                    sum2+=k.value;
                                                    k.name = i;
                                                    elments2[n]=k;
                                                   // document.write(k);
                                                    n++;

                                                }
                                                //document.getElementById("demo").innerHTML = elments;
                                            </script>
                                            <script>
                                                // 基于准备好的dom，初始化echarts实例

                                                var myChart = echarts.init(document.getElementById('pie_echarts'));
                                                // 指定图表的配置项和数据

                                                var option = {
                                                    tooltip: {
                                                        trigger: 'item',
                                                        formatter: "{a} <br/>{b}: {c} ({d}%)"
                                                    },
                                                    legend: {
                                                        orient: 'vertical',
                                                        x: 'left',
                                                        data: ['处置中', '超期结办', '按期结办', '邮件营销', '联盟广告', '视频广告', '百度', '谷歌', '必应', '其他']
                                                    },
                                                    series: [
                                                        {
                                                            name: '访问来源',
                                                            type: 'pie',
                                                            selectedMode: 'single',
                                                            radius: [0, '30%'],

                                                            label: {
                                                                normal: {
                                                                    position: 'inner'
                                                                }
                                                            },
                                                            labelLine: {
                                                                normal: {
                                                                    show: false
                                                                }
                                                            },
                                                            data: [
                                                                { value: sum1, name: '处置中' },
                                                                { value: sum2, name: '超期结办' }
                                                                //{ value: 1548, name: '按期结办' }
                                                            ]
                                                        },
                                                        {
                                                            name: '已结办',
                                                            type: 'pie',
                                                            radius: ['40%', '55%'],
                                                            label: {
                                                                normal: {
                                                                    formatter: '{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ',
                                                                    backgroundColor: '#eee',
                                                                    borderColor: '#aaa',
                                                                    borderWidth: 1,
                                                                    borderRadius: 4,
                                                                    // shadowBlur:3,
                                                                    // shadowOffsetX: 2,
                                                                    // shadowOffsetY: 2,
                                                                    // shadowColor: '#999',
                                                                    // padding: [0, 7],
                                                                    rich: {
                                                                        a: {
                                                                            color: '#999',
                                                                            lineHeight: 22,
                                                                            align: 'center'
                                                                        },
                                                                        // abg: {
                                                                        //     backgroundColor: '#333',
                                                                        //     width: '100%',
                                                                        //     align: 'right',
                                                                        //     height: 22,
                                                                        //     borderRadius: [4, 4, 0, 0]
                                                                        // },
                                                                        hr: {
                                                                            borderColor: '#aaa',
                                                                            width: '100%',
                                                                            borderWidth: 0.5,
                                                                            height: 0
                                                                        },
                                                                        b: {
                                                                            fontSize: 16,
                                                                            lineHeight: 33
                                                                        },
                                                                        per: {
                                                                            color: '#eee',
                                                                            backgroundColor: '#334455',
                                                                            padding: [2, 4],
                                                                            borderRadius: 2
                                                                        }
                                                                    }
                                                                }
                                                            },
                                                            data:elments
                                                            {#    [#}
                                                            {#    { value: 335, name: '安全隐患' },#}
                                                            {#    { value: 310, name: '党纪政纪' },#}
                                                            {#    { value: 234, name: '党建群团' },#}
                                                            {#    { value: 135, name: '规土城建' },#}
                                                            {#    { value: 1048, name: '环保水务' },#}
                                                            {#    { value: 251, name: '交通运输' },#}
                                                            {#    { value: 147, name: '教育卫生' },#}
                                                            {#    { value: 102, name: '处置中' }#}
                                                            {#]#}
                                                        },
                                                        {
                                                            name: '未结办',
                                                            type: 'pie',
                                                            radius: ['60%', '75%'],
                                                            label: {
                                                                normal: {
                                                                    formatter: '{a|{a}}{abg|}\n{hr|}\n  {b|{b}：}{c}  {per|{d}%}  ',
                                                                    backgroundColor: '#eee',
                                                                    borderColor: '#aaa',
                                                                    borderWidth: 1,
                                                                    borderRadius: 4,
                                                                    // shadowBlur:3,
                                                                    // shadowOffsetX: 2,
                                                                    // shadowOffsetY: 2,
                                                                    // shadowColor: '#999',
                                                                    // padding: [0, 7],
                                                                    rich: {
                                                                        a: {
                                                                            color: '#999',
                                                                            lineHeight: 22,
                                                                            align: 'center'
                                                                        },
                                                                        // abg: {
                                                                        //     backgroundColor: '#333',
                                                                        //     width: '100%',
                                                                        //     align: 'right',
                                                                        //     height: 22,
                                                                        //     borderRadius: [4, 4, 0, 0]
                                                                        // },
                                                                        hr: {
                                                                            borderColor: '#aaa',
                                                                            width: '100%',
                                                                            borderWidth: 0.5,
                                                                            height: 0
                                                                        },
                                                                        b: {
                                                                            fontSize: 16,
                                                                            lineHeight: 33
                                                                        },
                                                                        per: {
                                                                            color: '#eee',
                                                                            backgroundColor: '#334455',
                                                                            padding: [2, 4],
                                                                            borderRadius: 2
                                                                        }
                                                                    }
                                                                }
                                                            },
                                                            data:elments2
                                                            {#    [#}
                                                            {#    { value: 335, name: '安全隐患' },#}
                                                            {#    { value: 310, name: '党纪政纪' },#}
                                                            {#    { value: 234, name: '党建群团' },#}
                                                            {#    { value: 135, name: '规土城建' },#}
                                                            {#    { value: 1048, name: '环保水务' },#}
                                                            {#    { value: 251, name: '交通运输' },#}
                                                            {#    { value: 147, name: '教育卫生' },#}
                                                            {#    { value: 102, name: '处置中' }#}
                                                            {#]#}
                                                        },


                                                    ]
                                                };
                                                // 使用刚指定的配置项和数据显示图表。
                                                myChart.setOption(option);
                                            </script>
										</div>
									</div>
								</div>
							</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>

    	<!-- END WRAPPER -->


        <!--jquery-1.12.4.min.js-->
		<script  src="../static/assets/js/jquery.min.js"></script>

		<!--chartist.min.js-->
        <script src="../static/assets/chartist/js/chartist.min.js"></script>
        <script src="../static/assets/chartist/js/chartist-tooltip-plugin.js"></script>
        <script src="../static/assets/chartist/js/chartist-custom.js"></script>

        <!--bootstrap.min.js-->
        <script src="../static/assets/js/bootstrap.min.js"></script>

		<!--jquery.slimscroll.min.js-->
        <script src="../static/assets/js/jquery.slimscroll.min.js"></script>

		<!--feather.min.js-->
        <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

		<!-- DataMaps Plugin Js -->
        <script src="../static/assets/js/d3.min.js"></script>
        <script src="../static/assets/js/topojson.js"></script>
        <script src="../static/assets/js/datamaps.world.min.js"></script>

        <!--fontawesome-all.min.js-->
        <script src="../static/assets/js/fontawesome-all.min.js"></script>

        <!--Custom JS-->
        <script src="../static/assets/js/custom.js"></script>
</body>

</html>